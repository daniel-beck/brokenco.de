--- 
layout: post
title: Scaling, with your "smart platform choice"
tags: 
- software development
created: 1186669090
---
At times I feel as if I am plugged directly into the internet, almost like an NSA wiretap on AT&T's backbone, silently sniffing along reading packets until something throws up a red flag. This specifically applies to both <a href="http://python.org/" target="_blank">Python</a>, and .NET/<a href="http://mono-project.com" target="_blank">Mono</a> related bloggings, in which a fellow I know, Chris Messina, posted something titled "<a href="http://factoryjoe.com/blog/2007/07/18/wordpressmu-making-a-smart-platform-choice/" target="_blank">WordPressMU: Making a smart platform choice</a>" which, not surprisingly, threw up a red flag. Chris and I tend not to see eye-to-eye on a lot of things, most notably, <a href="http://microformats.org/" target="_blank">microformats</a>, along with Ruby on Rails, and some of the other "Web 2.0" style technologies/idealogies that Chris has embraced, while I stand back and look on, casually remarking "<a href="http://www.unethicalblogger.com/files/omgwtfbbq.jpg" rel="lightbox">OMGWTFBBQ</a>" every now and then.<br>
<br>
Chris opens the post with the following, in reference to a client of his:<center><span style="margin-left: 10px; margin-right: 10px;"><em>Their current website is built in .NET and they’re getting to the point where things are about to start getting set in stone in terms of scaling and overall architecture and it kinda freaked me out that they’d continue down this path using a platform that I think offers little when it comes to organic community-building or much in the way of “doing web things right”.</em></span></center><br>
<br>
<strong>Disclaimer: I'm not an expert on scaling, I just get yelled at when my code doesn't scale</strong><br>
<br>
Chris goes on to mention Ruby on Rails, Django, and <a href="http://mu.wordpress.org/" target="_blank">WordPressMU</a>, deciding on the third as the best option for <em>building a people-powered Web 2.0 community on</em>. Some of the reasons for this are employment, open source, web standards, community, scalability, politics, and a few others that don't matter. While Ruby on Rails, Django on mod_python, and WordPressMU on PHP are all good platforms to build upon, his complete dismissal of .NET (and in turn Mono) is <strong>completely</strong> unfounded, and in most cases, blatantly incorrect. <br>
<h2>Examples</h2><br>
Looking at some popular sites around the internet, you can get a feel for exactly what it takes to scale:<ul><li><strong>MySpace</strong><ul><li><strong>OS:</strong> Windows Server</li><li><strong>Platform:</strong> ColdFusion/.NET</li><li><strong>Database:</strong> MS SQL</li></ul>Originally, they were able to scale with ColdFusion, and have since switched over to .NET, making MySpace one of the largest sites running .NET with the largest MS-SQL installations <em>on the planet</em>.</li><li><strong>Facebook</strong><ul><li><strong>OS:</strong> Linux</li><li><strong>Platform:</strong> PHP</li><li><strong>Database:</strong> MySQL</li></ul>Facebook has scaled with a combination of MySQL and PHP, with a good amount of customization of their internal build of PHP, and memcached running to ensure database calls are kept to a minimum.</li><li><strong>Slide</strong><ul><li><strong>OS:</strong> Linux</li><li><strong>Platform:</strong> Python</li><li><strong>Database:</strong> MySQL</li></ul><br>
Okay, I'm throwing us in there for fun, but we've scaled with MySQL and mod_python with a hefty dose of secret sauce :)</li><li><strong>Yahoo!</strong><ul><li><strong>OS:</strong> FreeBSD</li><li><strong>Platform:</strong> PHP</li><li><strong>Database:</strong> MySQL</li></ul>Yahoo! obviously has to scale to serve a gigantic portion of the internet, and they're running PHP, MySQL with C++ extensions written where they need to be in order to acheive extra speed.</li><li><strong>Wikipedia</strong><ul><li><strong>OS:</strong> Linux</li><li><strong>Platform:</strong> PHP</li><li><strong>Database:</strong> MySQL</li></ul>Wikpedia.org has scaled with MySQL, PHP along with some Lucene indexing servers and memcached servers running around to improve read times from their database servers</li><br>
<li><strong>Microsoft</strong><ul><li><strong>OS:</strong> Windows Server</li><li><strong>Platform:</strong> .NET</li><li><strong>Database:</strong> MS SQL</li></ul>Microsoft tends to eat their own dog food with most of their web sites and portals, running on .NET with MS-SQL, and according to <a href="http://www.quantcast.com/top-sites-1" target="_blank">Quantcast</a> have 3 of the top 5 sites on the internet.</li><li><strong>Apple</strong><ul><li><strong>OS:</strong> Linux/Solaris/Mac OS X</li><li><strong>Platform:</strong> WebObjects/PHP</li><li><strong>Database:</strong> MySQL</li></ul>Apple runs a mix of WebObjects (Java), PHP, and god knows what else on varying platforms (Solaris, Linux, Mac OS X). I'm not 100% on exactly what's going on inside the web team at 1 Infinite Loop anymore, but they seem to be able to scale already with what they've got.</li></ul><br>
<h2>Counter-points</h2><br>
<strong>Employment</strong><br>
One of the points made is that it's easier to find PHP developers, as opposed to Python, or Ruby developers, which probably is true. However, .NET developers are <strong>definitely</strong> going to be more prominent, but most developers worth your employment, especially at a startup, are going to need to be able to pick up new frameworks and technologies quickly. <br>
<br>
<strong>Open Source</strong><br>
I will agree that having an open source platform to build on is a good idea, but certainly not a deal breaker for .NET, or whichever platform you choose to use. Starting a community, or a web business in general doesn't matter if you can't get your product out the door as soon as possible. Nobody cares how "open" you are in your development process, if you can't ship.<br>
<br>
<strong>Web standards</strong><br>
Citing <a href="http://channel9.msdn.com/" target="_blank">Channel 9</a> as an example of how (somehow) the .NET platform doesn't adhere to web standards and "open data formats" is one of the most ludicrous arguments I've ever seen. You can generate valid JSON, XML, SOAP, and XHTML from <strong>any</strong> platform, even mod_perl!<br>
<br>
<strong>Community</strong><br>
Chris makes the argument that somehow his experience in dealing with the WordPress community extrapolates to developing an actual product, and that if you're going to build a community-oriented site, you better use a platform that your community will approve of! Hint, it doesn't matter. 95% of your users probably won't care what you run, as long as they have the product to use.<br>
<br>
<strong>Economics</strong><br>
The points about economics are certainly valid, in that it's far easier to find hosts and sysadmins familiar with PHP than with Rails or Django (Python), That doesn't mean that it <em>scales</em> however, once you get past a couple of million users, you need people who know what  they're doing, with dedicated hardware to help your web application scale.<br>
<br>
<strong>Scalibility</strong><br>
Talking about how you <em>feel</em> scaling is absolutely absurd. You will feel pain, that's what happens we you have to scale. Standing back, and looking at the code you've worked insanely hard on, and trying to figure out how to make that faster is painful, regardless of platform. If I've consulted with somebody about how to scale my architecture and they say "well, that doesn't <em>feel</em> right" without citing sources, strategies, or <strong>reasons</strong>, I'm going to find somebody else, or I'm going to fall on my face when the time comes to scale.<br>
<br>
<Strong>Politics</strong><br>
Just a quote:<br>
<em>However, I think people familiar with modern web design would agree with me that WordPress/PHP, Django or Rails are all superior choices over .NET when it come to the politics of technology development. In terms of openness, being forward-thinking and in terms of community outlook, any of these choices are going to net you a very different kind of response. Being keen to what each choice says about you is key to making a wise decision.</em><br>
First error, is asking people involved in web design how you want to scale, you should probably ask people involved in systems architecture. Politics don't exist when you need to scale, or ship product, it's that simple. What gets the job done, the fastest, with the greatest net result.<br>
<br>
<h2>End game</h2><br>
Chris' general ignorance of some of the features of ASP.NET 2.0, and his zealotry when it comes to buzzwords like "community, forward-thinking, people-powered, Web 2.0" and their ilk doesn't surprise me, since he's not a developer. For example, in ASP.NET 2.0 you can have <em>asynchronous pages</em>, just like you can have interlaced GIF images, that progressively load, you can have pages that progressively load, instead of needing the server to fully generate the entire page before it's piped back to the client. Of course, none of this matters since <strong>architecture</strong> is the biggest hurdle when it comes to scaling, not <strong>platform</strong>. The more important question to answer before you toss out your existing code base in favor of a more buzzword compliant platform are:<ul><li>How can you more efficiently handle database queries?</li><li>Can you cut out unnecessary database queries?</li><li>Can you switch over to a newer version (MySQL 4 and 5 I'm looking at you) of your database to improve performance?</li><li>Will it be effective to add a caching solution like memcached between your web farm and your database servers?</li><li>What can be relegated into progessive page loads either via asynchronous pages in ASP.NET 2.0, or through the use of AJAX back to your web servers to retrieve more data instead of forcing a new page load? </li><li>Is this problem simply caused by not having enough servers?</li></ul><br>
<br>
Citing zero empirical evidence, not counting some useless benchmarks (scaling is far more case-by-case than doing benchmarkable operations), and going with whatever "the cool kids" are using is the quick road to failure. All of the sites I mentioned above have people whose job is to sit around all day and figure out how to squeeze more performance out of their architecture and help the sites grow with their userbase. The trick to optimization is rarely a complete rewrite, or any one trick, it's about finding where the bottlenecks are, and doing whatever possible to minimize those.<br>
<br>
As a final note, all the platforms referenced above just spit out pages. That's it. It's how you form the output that determines how "community friendly" or aesthetically pleasing the final product is. It's all fair game between the <code>&lt;html&gt;</code> tags :)
